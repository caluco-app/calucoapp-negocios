

<mat-stepper [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
        <form [formGroup]="firstFormGroup">
            <ng-template matStepLabel>Productos</ng-template>
            <div class="row">
                <div class="col s12">
                    <h1>Busqueda de productos</h1>
                </div>

            </div>
            <div class="row">
                <form class="col s12" [formGroup]="firstFormGroup">
                    <div class="row">
                        <div class="input-field col s12">
                            <i class="material-icons prefix">search</i>
                            <input id="searchProduct" type="text" formControlName="firstCtrl"
                                (keydown.enter)="searchProducts()">
                            <label for="searchProduct">Buscar Producto</label>
                        </div>

                    </div>
                </form>
                <div class="col s12">
                    <table>
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Precio U</th>
                                <th>Cantidad</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr *ngFor="let d of productosEncontrados; index as i">
                                <td> {{d.codigo}} {{d.nombre}}</td>
                                <td>{{d.precio | currency}}</td>
                                <td>

                                    <input id="id{{i}}" name="id{{i}}" type="text" #inputField
                                        style="width: 70px; text-align: center;" [(ngModel)]="d.cantidad"
                                        [ngModelOptions]="{standalone: true}" (keydown.enter)="salvarItem(d)">
                                </td>
                            </tr>
                            <tr *ngIf="productosEncontrados.length==0">
                                <td colspan="10">No hay registros</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
            <div>
                <button mat-button matStepperNext type="button" class="btn pink white-text" (click)="verDetalle()">
                    <span class="left "> Siguiente</span>
                    <i class="material-icons right">arrow_forward_ios</i>
                </button>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup" label="Detalle">
        <div class="row">
            <div class="col s12 l4">
                <div class="row">
                    <div class="col s12 center">
                        <h1>TICKET {{detalle.codigo}}</h1>
                        <h2 class="center">{{detalle.negocio}}</h2>
                        <h3 class="center">
                            {{detalle.sucursal}}
                            <br>
                            {{detalle.fecha | date :'dd/MM/YYYY HH:MM:SS' }}
                        </h3>
                    </div>
                    <div class="col s12">
                        <div class="row" style="font-weight: 800;">
                            <div class="col s6">
                                DETALLE
                            </div>
                            <div class="col s3">
                                CANT
                            </div>
                            <div class="col s3">
                                TOTAL
                            </div>
                        </div>
                        <ng-container *ngFor="let d of detalleProductos">
                            <div class="row">

                                <div class="col s6">
                                    {{d.nombre}} {{d.preciounitario | currency}}
                                </div>
                                <div class="col s3">
                                    {{d.cantidad}}
                                </div>
                                <div class="col s3">
                                    {{d.cantidad * d.preciounitario | currency}}
                                </div>

                            </div>
                        </ng-container>

                        <div class="row">
                            <div class="col s9 right-align">
                                <strong >TOTAL DE ITEMS</strong>
                            </div>
                            <div class="col s3 ">
                                <strong>{{detalle.cantidaditems }}</strong>
                            </div>
                            <div class="col s9 right-align">
                                <strong >TOTAL A PAGAR</strong>
                            </div>
                            <div class="col s3 ">
                                <strong>{{detalle.total | currency}}</strong>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
        <form [formGroup]="secondFormGroup">

            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step>
        <ng-template matStepLabel>Final</ng-template>
        <p>You are now done.</p>
        <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button (click)="stepper.reset()">Reset</button>
        </div>
    </mat-step>
</mat-stepper>